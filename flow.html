<div class="uni-content-tile">
  <!-- LEFT COLUMN -->
  <div class="left-column">
    <div class="iphone-container">
      <!-- Profile Image -->
      <img src="https://static.wixstatic.com/media/1799ca_3dbf0ad66ef24fd78afd87ce46a1a4dd~mv2.jpg" 
           alt="Profile" class="profile-image">

      <!-- Timestamp -->
      <div class="phone-timestamp">Thursday 2:34 PM</div>

      <!-- Chat -->
      <div class="chat-wrapper">
        <div class="chat-messages" id="chat-messages"></div>
      </div>

      <!-- Top fade -->
      <div class="top-fade"></div>
    </div>
  </div>

  <!-- RIGHT COLUMN -->
  <div class="right-column">
    <div class="keyword-pill">NEW</div>
    <h2 class="mini-title">Seamless Pre-Approval</h2>
    <p>Place your supporting text here. Explain the benefits quickly and clearly.</p>
    <button class="cta-button">Get Started</button>
  </div>
</div>

<script>
const messages = [
  {text: "Hello! How can I help you today?", side: "left"},
  {text: "Hi! I want to check my pre-approval.", side: "right"},
  {text: "Sure! It only takes a few seconds. ðŸ‘Œ", side: "left"},
  {text: "Great, let's do it!", side: "right"},
  {text: "Please provide your info.", side: "left"},
  {text: "Done! Submitted.", side: "right"},
   {text: "Hello! How can I help you today?", side: "left"},
  {text: "Hi! I want to check my pre-approval.", side: "right"},
  {text: "Sure! It only takes a few seconds.", side: "left"},
  {text: "Great, let's do it!", side: "right"},
  {text: "Please provide your info.", side: "left"},
  {text: "Done! Submitted. ðŸ¥³", side: "right"},
];

const chatMessages = document.getElementById('chat-messages');
let index = 0;

function addMessage(msg) {
  const bubble = document.createElement('div');
  bubble.className = 'chat-bubble ' + (msg.side === 'right' ? 'chat-right' : 'chat-left');
  bubble.textContent = msg.text;
  chatMessages.appendChild(bubble);
  
  setTimeout(() => {
    bubble.style.opacity = 1;
    bubble.style.transform = 'translateY(0)';
    chatMessages.style.transform = `translateY(-${Math.max(0, chatMessages.scrollHeight - chatMessages.parentNode.clientHeight)}px)`;
  }, 50);
}

function nextMessage() {
  if(index >= messages.length) return; // Stop at the last message

  const msg = messages[index];
  
  const typing = document.createElement('div');
  typing.className = 'typing-bubble ' + (msg.side === 'right' ? 'typing-right' : 'typing-left');
  typing.innerHTML = '<div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div>';
  chatMessages.appendChild(typing);
  chatMessages.parentNode.scrollTop = chatMessages.scrollHeight;

  setTimeout(() => {
    typing.remove();
    addMessage(msg);
    index++;
    setTimeout(nextMessage, 500 + Math.random() * 800);
  }, 1200 + Math.random() * 800);
}

nextMessage();
</script>

<div class="uni-content-tile">
  <!-- LEFT COLUMN with chart -->
  <div class="left-column">
    <div class="chart-container">
      <div class="top-right-box"><span id="percent">+0%</span></div>
      <svg viewBox="0 0 330 200">
        <defs>
          <linearGradient id="lineGradient" x1="0" y1="0" x2="1" y2="0">
            <stop offset="0%" stop-color="#00b0ff"/>
            <stop offset="100%" stop-color="#00ff90"/>
          </linearGradient>
        </defs>

        <polyline class="track-line"
          points="20,160 30,155 60,150 90,145 120,120 150,135 180,130 210,128 240,125 270,100 300,115"/>
        
        <g>
          <line x1="30" y1="20" x2="30" y2="180" class="grid-line"/>
          <line x1="60" y1="20" x2="60" y2="180" class="grid-line"/>
          <line x1="90" y1="20" x2="90" y2="180" class="grid-line"/>
          <line x1="120" y1="20" x2="120" y2="180" class="grid-line"/>
          <line x1="150" y1="20" x2="150" y2="180" class="grid-line"/>
          <line x1="180" y1="20" x2="180" y2="180" class="grid-line"/>
          <line x1="210" y1="20" x2="210" y2="180" class="grid-line"/>
          <line x1="240" y1="20" x2="240" y2="180" class="grid-line"/>
          <line x1="270" y1="20" x2="270" y2="180" class="grid-line"/>
          <line x1="300" y1="20" x2="300" y2="180" class="grid-line"/>
        </g>

        <line x1="20" y1="180" x2="310" y2="180" stroke="#e4e4e4" stroke-width="1"/>

        <text x="30" y="195" text-anchor="middle" class="year-label">'26</text>
        <text x="60" y="195" text-anchor="middle" class="year-label">'27</text>
        <text x="90" y="195" text-anchor="middle" class="year-label">'28</text>
        <text x="120" y="195" text-anchor="middle" class="year-label">'29</text>
        <text x="150" y="195" text-anchor="middle" class="year-label">'30</text>
        <text x="180" y="195" text-anchor="middle" class="year-label">'31</text>
        <text x="210" y="195" text-anchor="middle" class="year-label">'32</text>
        <text x="240" y="195" text-anchor="middle" class="year-label">'33</text>
        <text x="270" y="195" text-anchor="middle" class="year-label">'34</text>
        <text x="300" y="195" text-anchor="middle" class="year-label">'35</text>

        <text x="160" y="80" class="mid-label">Cash-on-Cash</text>

        <polyline class="growth-line"
          points="20,160 30,155 60,150 90,145 120,120 150,135 180,130 210,128 240,125 270,100 300,115"/>
      </svg>
    </div>
  </div>

  <!-- RIGHT COLUMN -->
  <div class="right-column">
    <div class="keyword-pill">NEW</div>
    <h2 class="mini-title">Seamless Pre-Approval</h2>
    <p>Place your supporting text here. Explain the benefits quickly and clearly.</p>
    <button class="cta-button">Get Started</button>
  </div>
</div>

<script>
window.addEventListener('load', () => {
    const line = document.querySelector('.growth-line');
    line.style.strokeDashoffset = 0;

    const percentEl = document.getElementById('percent');
    let current = 0;
    const target = 42.7;
    const duration = 2000;
    const increment = target / (duration / 20);
    const counter = setInterval(() => {
        current += increment;
        if(current >= target) {
            current = target;
            clearInterval(counter);
        }
        percentEl.textContent = `+${current.toFixed(1)}%`;
    }, 20);
});
</script>

