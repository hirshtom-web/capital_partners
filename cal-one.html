<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Real Estate Investment Calculator</title>

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Material Icons -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

  <style>
    body {
      font-family: 'Plus Jakarta Sans', sans-serif;
      margin: 0;
      padding: 20px;
      background-color: #fff;
      color: #1e0949;
    }

    .container {
      display: flex;
      gap: 40px;
      max-width: 1200px;
      margin: auto;
      align-items: stretch;
      flex-wrap: wrap;
    }

    .left, .right {
      flex: 1;
      background-color: #fef7f2;
      border-radius: 18px;
      padding: 30px;
      display: flex;
      flex-direction: column;
    }

    h2 {
      text-align: center;
      margin-bottom: 30px;
      font-size: 36px;
      font-weight: 700;
    }

    form {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
      flex: 1;
    }

    .input-group {
      position: relative;
      display: flex;
      flex-direction: column;
      flex: 1 1 220px;
      max-width: 220px;
    }

    .input-group input {
      width: 100%;
      height: 60px;
      padding: 12px;
      font-size: 14px;
      border-radius: 8px;
      border: none;
      background-color: #fff;
      color: #000;
      outline: none;
      box-sizing: border-box;
      transition: all 0.2s ease;
      -moz-appearance: textfield;
    }

    .input-group input:focus {
      background-color: #ffffff;
      box-shadow: 0 0 0 1.5px #1e0949;
    }

    .input-label {
      position: absolute;
      top: 10px;
      left: 12px;
      font-size: 9px;
      letter-spacing: 0.5px;
      color: #999;
      text-transform: uppercase;
      pointer-events: none;
    }

    .bottom-row {
      display: flex;
      flex-direction: column;
      align-items: stretch;
      width: 100%;
      margin-top: 20px;
      gap: 15px;
    }

    .toggle-section {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      flex-wrap: wrap;
      margin-bottom: 10px;
      width: 100%;
    }

    .toggle-section label {
      display: flex;
      align-items: center;
      gap: 5px;
      font-weight: 500;
      cursor: pointer;
    }

    .hidden-criteria {
      display: none;
      width: 100%;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
      margin-top: 10px;
    }

    button {
      width: 100%;
      padding: 14px;
      font-size: 16px;
      background-color: #1e0949;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    button:hover {
      background-color: #3c1e7c;
    }

    .material-symbols-outlined.calc-icon {
      font-size: 24px;
      color: #fff;
    }

    #resultsHighlight {
      background-color: #d0e8ff;
      border-radius: 12px;
      padding: 20px;
      margin-top: 10px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      color: #1e0949;
      font-size: 18px;
      font-weight: 500;
    }

    .switch {
      position: relative;
      display: inline-block;
      width: 60px;
      height: 30px;
    }

    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
      cursor: pointer;
    }

    .slider {
      position: absolute;
      cursor: pointer;
      top: 0; left: 0; right: 0; bottom: 0;
      background-color: #ccc;
      transition: 0.4s;
      border-radius: 30px;
    }

    .slider:before {
      position: absolute;
      content: "";
      height: 24px;
      width: 24px;
      left: 3px;
      bottom: 3px;
      background-color: white;
      transition: 0.4s;
      border-radius: 50%;
    }

    input:checked + .slider {
      background-color: #1e0949;
    }

    input:checked + .slider:before {
      transform: translateX(30px);
    }

    @media (max-width: 900px) {
      .container {
        flex-direction: column;
      }
      .left, .right {
        width: 100%;
      }
      form {
        flex-direction: column;
        align-items: stretch;
      }
      .input-group {
        max-width: 100%;
      }
      .hidden-criteria {
        flex-direction: column;
        gap: 15px;
      }
      .toggle-section {
        flex-direction: column;
      }
      .bottom-row {
        gap: 10px;
      }
    }
  </style>
</head>
<body>

<div class="container">
  <!-- LEFT SIDE -->
  <div class="left">
    <h2>Rental Property Investment Calculator</h2>
    <form id="reCalcForm">

      <!-- Main Inputs -->
      <div class="input-group">
        <input type="number" id="purchasePrice" placeholder=" " value="500000" required>
        <span class="input-label">Purchase Price ($)</span>
      </div>

      <div class="input-group">
        <input type="number" id="tax" placeholder=" " value="3500">
        <span class="input-label">Re Tax ($/yr)</span>
      </div>

      <div class="input-group">
        <input type="number" id="hoa" placeholder=" " value="250">
        <span class="input-label">HOA ($/mo)</span>
      </div>

      <div class="input-group">
        <input type="number" id="rent" placeholder=" " value="3200">
        <span class="input-label">Rent ($/mo)</span>
      </div>

      <!-- CASH / FINANCING TOGGLE -->
      <div class="toggle-section">
        <label class="switch">
          <input type="checkbox" id="cashFinancingToggle">
          <span class="slider"></span>
        </label>
        <span>ALL CASH / FINANCING</span>
      </div>

      <!-- Hidden criteria -->
      <div id="additionalCriteria" class="hidden-criteria">
        <div class="input-group">
          <input type="number" id="insurance" placeholder=" " value="1500">
          <span class="input-label">Insurance ($/yr)</span>
        </div>

        <div class="input-group">
          <input type="number" id="cashInvestment" placeholder=" " value="150000" required>
          <span class="input-label">Cash Investment ($)</span>
        </div>

        <div class="input-group">
          <input type="number" id="mortgageAmount" placeholder=" " readonly>
          <span class="input-label">Mortgage Amount ($)</span>
        </div>

        <div class="input-group">
          <input type="number" id="mortgageRate" placeholder=" " value="6.25" step="0.01">
          <span class="input-label">Rate (%)</span>
        </div>

        <div class="input-group">
          <input type="number" id="mortgageTerm" placeholder=" " value="30">
          <span class="input-label">Term (Years)</span>
        </div>

        <div class="input-group">
          <input type="number" id="management" placeholder=" " value="8" step="0.1">
          <span class="input-label">Mgmt Fee (%)</span>
        </div>

        <div class="input-group">
          <input type="number" id="vacancy" placeholder=" " value="5" step="0.1">
          <span class="input-label">Vacancy (%)</span>
        </div>

        <div class="input-group">
          <input type="number" id="otherExpenses" placeholder=" " value="500">
          <span class="input-label">Other Exp ($/yr)</span>
        </div>
      </div>

      <!-- Bottom row -->
      <div class="bottom-row">
        <button type="button" id="calculateBtn">
          <span class="material-symbols-outlined calc-icon">calculate</span>
          Calculate
        </button>
      </div>
    </form>
  </div>

  <!-- RIGHT SIDE -->
  <div class="right">
    <h2>Results</h2>
    <div id="resultsHighlight">
      <div><strong>Monthly Cash Flow:</strong> <span id="monthlyCashFlow">$0</span></div>
      <div><strong>Annual Cash Flow:</strong> <span id="annualCashFlow">$0</span></div>
    </div>
  </div>
</div>

<script>
const purchaseInput = document.getElementById('purchasePrice');
const cashInput = document.getElementById('cashInvestment');
const mortgageInput = document.getElementById('mortgageAmount');
const toggleBtn = document.getElementById('additionalCriteriaToggle');
const additionalCriteria = document.getElementById('additionalCriteria');
const cashFinancingToggle = document.getElementById('cashFinancingToggle');

// Auto-calculate mortgage
function updateMortgage() {
  const purchase = parseFloat(purchaseInput.value || 0);
  const cash = parseFloat(cashInput.value || 0);
  if (purchase > 0 && cash >= 0) {
    mortgageInput.value = Math.max(purchase - cash, 0).toFixed(0);
  }
}
purchaseInput.addEventListener('input', updateMortgage);
cashInput.addEventListener('input', updateMortgage);
updateMortgage();

// Toggle ALL CASH / FINANCING
cashFinancingToggle.addEventListener('change', () => {
  if (cashFinancingToggle.checked) {
    // FINANCING
    additionalCriteria.style.display = 'flex';
  } else {
    // ALL CASH
    additionalCriteria.style.display = 'none';
    mortgageInput.value = 0;
  }
});

// Calculate cash flow
document.getElementById('calculateBtn').addEventListener('click', () => {
  const rent = parseFloat(document.getElementById('rent').value || 0);
  const hoa = parseFloat(document.getElementById('hoa').value || 0);
  const tax = parseFloat(document.getElementById('tax').value || 0) / 12;

  let monthlyCashFlow = 0;

  if (additionalCriteria.style.display === 'flex') {
    const P = parseFloat(mortgageInput.value || 0);
    const r = parseFloat(document.getElementById('mortgageRate').value || 0) / 100 / 12;
    const n = parseFloat(document.getElementById('mortgageTerm').value || 30) * 12;

    let mortgagePayment = 0;
    if (P > 0 && r > 0 && n > 0) {
      mortgagePayment = (P * r * Math.pow(1+r, n)) / (Math.pow(1+r, n) - 1);
    }

    const insurance = parseFloat(document.getElementById('insurance').value || 0) / 12;
    const managementRate = parseFloat(document.getElementById('management').value || 0) / 100;
    const vacancyRate = parseFloat(document.getElementById('vacancy').value || 0) / 100;
    const other = parseFloat(document.getElementById('otherExpenses').value || 0) / 12;

    const effectiveRent = rent * (1 - vacancyRate);
    const managementFee = effectiveRent * managementRate;
    const monthlyExpenses = mortgagePayment + hoa + insurance + tax + managementFee + other;
    monthlyCashFlow = effectiveRent - monthlyExpenses;

  } else {
    monthlyCashFlow = rent - hoa - tax;
  }

  document.getElementById('monthlyCashFlow').textContent = `$${monthlyCashFlow.toFixed(2)}`;
  document.getElementById('annualCashFlow').textContent = `$${(monthlyCashFlow*12).toFixed(2)}`;
});
</script>

</body>
</html>
